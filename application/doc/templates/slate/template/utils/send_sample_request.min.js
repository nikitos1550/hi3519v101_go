function htmlEntities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}define(["jquery"],function(e){function a(a,r,s,n){var l=e('article[data-group="'+a+'"][data-name="'+r+'"][data-version="'+s+'"]'),u={};l.find(".sample-request-header").each(function(a,r){var t=e(r).data("sample-request-header-group");l.find('[data-sample-request-header-group="'+t+'"]').each(function(a,r){var t=e(r).data("sample-request-header-name"),s=r.value;r.optional||""===r.defaultValue||(s=r.defaultValue),u[t]=s})});var o={},p={};l.find(".sample-request-param").each(function(a,r){var t=e(r).data("sample-request-param-group");l.find('[data-sample-request-param-group="'+t+'"]').each(function(a,r){var t=e(r).data("sample-request-param-name"),s=r.value;r.optional||""===r.defaultValue||(s=r.defaultValue),o[t]=s,p[t]=e(r).next().text()})});for(var i=l.find(".sample-request-url").val(),c=pathToRegexp(i,null).exec(i),d=1;d<c.length;d++){var f=c[d].substr(1);void 0!==o[f]&&(i=i.replace(c[d],encodeURIComponent(o[f])),delete o[f])}l.find(".sample-request-response").fadeTo(250,1),l.find(".sample-request-response-json").html("Loading..."),t(),_.each(o,function(e,a){var r=p[a].toLowerCase();if("object"===r||"array"===r)try{o[a]=JSON.parse(e)}catch(e){}});var m={url:i,headers:u,data:o,type:n.toUpperCase(),success:function(e,a,r){var s;try{s=JSON.parse(r.responseText),s=JSON.stringify(s,null,4)}catch(a){s=e}try{s=htmlEntities((new XMLSerializer).serializeToString(s))}catch(e){}console.log(s),l.find(".sample-request-response-json").html(s),t()},error:function(e,a,r){var s,n="Error "+e.status+": "+r;try{s=JSON.parse(e.responseText),s=JSON.stringify(s,null,4)}catch(a){s=escape(e.responseText)}s&&(n+="<br>"+s),l.find(".sample-request-response").is(":visible")&&l.find(".sample-request-response").fadeTo(1,.1),l.find(".sample-request-response").fadeTo(250,1),l.find(".sample-request-response-json").html(n),t()}};e.ajax(m)}function r(a,r,s){var n=e('article[data-group="'+a+'"][data-name="'+r+'"][data-version="'+s+'"]');n.find(".sample-request-response-json").html(""),n.find(".sample-request-response").hide(),n.find(".sample-request-param").each(function(e,a){a.value=""});var l=n.find(".sample-request-url");l.val(l.prop("defaultValue")),t()}function t(){e('[data-spy="scroll"]').each(function(){e(this).scrollspy("refresh")})}return{initDynamic:function(){e(".sample-request-send").off("click"),e(".sample-request-send").on("click",function(r){r.preventDefault();var t=e(this).parents("article");a(t.data("group"),t.data("name"),t.data("version"),e(this).data("sample-request-type"))}),e(".sample-request-clear").off("click"),e(".sample-request-clear").on("click",function(a){a.preventDefault();var t=e(this).parents("article");r(t.data("group"),t.data("name"),t.data("version"))})}}});