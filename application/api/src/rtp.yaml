rtp:
    get:
        summary: 'Show all RTP streamer instances'
        tags:
            - rtp
        operationId: 'rtpShow'
        responses:
                '200':
                    description: 'Success'
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    allOf:
                                        - type: object
                                          properties:
                                            id:
                                                type: integer
                                                description: "RTP streamer instance id"
                                        - $ref: "#/components/schemas/rtpInstance"
                                          #- $ref: "#/components/schemas/rtpStat"
    post:
        summary: 'Create RTP streamer instance'
        tags:
            - rtp
        operationId: 'rtpCreate'
        description: |
            TODO.
        requestBody:
            required: true
            content:
                application/json:
                    schema:
                        $ref: "#/components/schemas/rtpInstance"
        responses:
            "200":
                description: "Instances created"
            "501":
                description: "TODO Some ERROR"

rtp/{id}:
    parameters:
        - name: id
          in: path
          type: int
          description: RTP streamer instance id
          required: true

    get:
        summary: 'Show RTP streamer instance information'
        tags:
            - rtp
        operationId: 'rtpIdShow'
        responses:
            "200":
                description: "RTP streamer instance information"
                content:
                    application/json:
                        schema:
                            allOf:
                                - type: object
                                  properties:
                                    id:
                                        type: integer
                                        description: "RTP streamer instance id"
                                - $ref: "#/components/schemas/rtpInstance"
                                  #- $ref: "#/components/schemas/rtpStat"
            "404":
                description: "RTP streamer instance not found"
    delete:
        summary: "Destroy RTP sreamer instance"
        tags:
            - rtp
        operationId: "rtpIdDelete"
        responces:
            "200":
                description: "RTP streamer instance destroyed"
            "404":
                description: "RTP streamer instance not found"

rtp/{id}/stat:
    parameters:
        - name: id
          in: path
          type: int
          description: RTP streamer instance id
          required: true
    get:
        summary: 'Show RTP streamer instance statistics'
        tags:
            - rtp
        operationId: 'rtpIdStat'
        responses:
                '200':
                    description: 'RTP streamer instance statistics'
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/rtpStat"
                '404':
                    description: 'RTP streamer instance not found'
components:
    schemas:
        rtpInstance:
            type: object
            description: "TODO"
            properties:
                encoder:
                    type: integer
                    description: "Source encoder id"
                ip:
                    type: string
                    format: ip
                    description: "Target host ip address"
                port:
                    type: integer
                    minimum: 1
                    maximum: 65536
                    description: "Target host UDP port"
                tsmode:
                    type: string
                    enum:
                        - ms
                        - base
                    description: |
                        Timestamp mode.

                        **ms** timestamp field will contains system time in milliseconds

                        **base** timestamp field will contains abstract time (starting 0) and delta = tsbase / fps.
                        *Base 90kHz is some kind of expected timestamp for common player*.
                tsbase:
                    type: integer
                    minimum: 1
                    description: |
                        Timestamp base in Hz.

                        Applicable only for tsmode **base**.

        rtpStat:
            type: object
            description: "TODO"
            properties:
                items:
                    type: integer
                    description: "Sent frames for MJPEG, sent NALs for H.264, H.265"
                packets:
                    type: integer
                    description: "Sent UDP packets"
                bytes:
                    type: integer
                    description: "Sent amount of bytes"


description: |
    Simple rtp push feature.

    This streamer will take encoded data, pack them to RTP (<a href="https://tools.ietf.org/html/rfc3550" target="_blank">RFC3550</a>).

    Streamer is applicable for MJPEG (<a href="https://tools.ietf.org/html/rfc2435" target="_blank">RFC2435</a>), 
    H.264(<a href="https://tools.ietf.org/html/rfc6184" target="_blank">RFC6184</a>), 
    H.265(<a href="https://tools.ietf.org/html/rfc7798" target="_blank">RFC7798</a>).
